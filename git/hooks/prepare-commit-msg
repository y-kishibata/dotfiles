#!/bin/sh

out=$1

function message() {
  mv $out $out.tmp
  cat <<EOS > $out
$1 {{è¦ç´„ã‚’æ›¸ã}}

Issue No: {{ã‚ã‚Œã°}}
Description: {{ä¿®æ­£ã®å†…å®¹ã‚’ç°¡æ½”ã«}}
EOS
  cat $out.tmp >> $out
}

str=$(cat <<-EOS
   :none: å…ƒã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’åˆ©ç”¨
ğŸ› :bug: ãƒã‚°ä¿®æ­£
ğŸ’Š :pill: ç´°ã‹ãªä¿®æ­£
ğŸ“š :books: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
ğŸ‘ :+1: æ©Ÿèƒ½æ”¹å–„
âœ¨ :sparkles: æ©Ÿèƒ½è¿½åŠ 
â™»ï¸ :recycle: ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
ğŸš¿ :shower: ä¸è¦ãªæ©Ÿèƒ½ãƒ»ä½¿ã‚ã‚Œãªããªã£ãŸæ©Ÿèƒ½ã®å‰Šé™¤
ğŸ’š :green_heart: ãƒ†ã‚¹ãƒˆã‚„CIã®ä¿®æ­£ãƒ»æ”¹å–„
ğŸ‘• :shirt: Lintã‚¨ãƒ©ãƒ¼ã®ä¿®æ­£ã‚„ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ã®ä¿®æ­£
ğŸš€ :rocket: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„
ğŸ‰ :ideograph_advantage: é–‹ç™ºç’°å¢ƒæ”¹å–„ã€æ•´ç†
ğŸ†™ :up: ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãªã©ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
ğŸ“Š :bar_chart: ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°æ©Ÿèƒ½ã®è¿½åŠ ãƒ»ä¿®æ­£
EOS
)
peco=$(echo "$str" | peco)
if [ -z "$peco" ]; then
    echo 'âŒ ã‚³ãƒŸãƒƒãƒˆã‚’å–ã‚Šæ¶ˆã—ã¾ã—ãŸã€‚'
    exit 1
fi

if echo "$peco" | grep -q ":none:"; then 
    exit 0
fi

type=$(echo "$peco" | awk 'match($0, /(:.*:)/) {print substr($0, RSTART, RLENGTH)}')
message "$type"
